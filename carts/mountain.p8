pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
 cls()
 p = {}
 h = {}
 for i = 1,64 do
  add(h,{rnd(128),rnd(128),1,1})
 end
end
function _update60()
 for i = 1,count(h) do
  h[i][1] += h[i][3]
  h[i][2] += h[i][4]
  h[i][1] -= flr(h[i][1]/128)*128
  h[i][2] -= flr(h[i][2]/128)*128
  --h[i][2] = sin(h[i][1]/100)*10
  add(p,{h[i][1],h[i][2]+g(h[i][1],h[i][2]),28})
 end
 nex = {}
 for i = 1,count(p) do
  p[i][3] -=1
  if p[i][3] > 0 then
   add(nex,p[i])
  end
 end
 p = nex
end
function _draw()
 cls()
 for i = 1,count(h) do
  x = h[i][1]
  y = h[i][2]
  y += g(x,y)/1.5
  pset(x,y,7)
 end
 for i = 1,count(p) do
  x = p[i][1]
  y = p[i][2]+rnd(1)
  pset(x,y,12)
 end
end
function g(x,y) 
 return sin(x/100+y*x/10000)*10+cos(y/25+x/20)*2+sin(x/50)*5
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
